<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Assistant - ChatGPT Style</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #212121;
            color: #ffffff;
            height: 100vh;
            overflow: hidden;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 1200px;
            margin: 0 auto;
            background: #212121;
        }

        .header {
            background: #2f2f2f;
            padding: 15px 20px;
            border-bottom: 1px solid #404040;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .header .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn {
            background: #10a37f;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            color: white;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .btn:hover {
            background: #0d8c6c;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        .message-container {
            display: flex;
            margin-bottom: 25px;
            align-items: flex-start;
            gap: 15px;
            max-width: 100%;
        }

        .user-container {
            justify-content: flex-end;
            margin-left: 20%;
        }

        .bot-container {
            justify-content: flex-start;
            margin-right: 20%;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: bold;
            flex-shrink: 0;
        }

        .user-avatar {
            background: #10a37f;
            color: white;
        }

        .bot-avatar {
            background: #ab68ff;
            color: white;
        }

        .message-content {
            flex: 1;
            padding: 15px 20px;
            border-radius: 18px;
            line-height: 1.6;
            font-size: 15px;
            word-wrap: break-word;
            position: relative;
        }

        .user-message {
            background: #2f2f2f;
            color: #ffffff;
            border: 1px solid #404040;
        }

        .bot-message {
            background: #1a1a1a;
            color: #ffffff;
            border: 1px solid #333333;
        }

        .typing-container {
            display: none;
            margin-bottom: 25px;
            align-items: flex-start;
            gap: 15px;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            padding: 15px 20px;
            background: #1a1a1a;
            border-radius: 18px;
            border: 1px solid #333333;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #666;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .input-container {
            padding: 20px;
            background: #2f2f2f;
            border-top: 1px solid #404040;
        }

        .input-wrapper {
            display: flex;
            align-items: flex-end;
            gap: 12px;
            max-width: 1000px;
            margin: 0 auto;
        }

        .message-input {
            flex: 1;
            background: #1a1a1a;
            border: 1px solid #404040;
            border-radius: 12px;
            padding: 12px 16px;
            color: #ffffff;
            font-size: 16px;
            resize: none;
            min-height: 50px;
            max-height: 200px;
            outline: none;
            font-family: inherit;
        }

        .message-input:focus {
            border-color: #10a37f;
        }

        .send-button {
            background: #10a37f;
            border: none;
            border-radius: 8px;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 18px;
            transition: all 0.2s;
        }

        .send-button:hover:not(:disabled) {
            background: #0d8c6c;
        }

        .send-button:disabled {
            background: #404040;
            cursor: not-allowed;
        }

        .status-bar {
            background: #1a1a1a;
            padding: 8px 20px;
            font-size: 12px;
            color: #888;
            text-align: center;
            border-top: 1px solid #333;
        }

        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            color: #888;
        }

        .welcome-message h2 {
            margin-bottom: 10px;
            color: #fff;
        }

        /* Scrollbar Styling */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #404040;
            border-radius: 3px;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .user-container {
                margin-left: 10%;
            }
            
            .bot-container {
                margin-right: 10%;
            }
            
            .header {
                padding: 12px 15px;
            }
            
            .chat-messages {
                padding: 15px;
            }
            
            .input-container {
                padding: 15px;
            }
        }

        /* Dark theme enhancements */
        .highlight {
            color: #10a37f;
            font-weight: 600;
        }

        .code-block {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 12px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="header">
            <h1>
                <i class="fas fa-robot"></i>
                AI Assistant
            </h1>
            <div class="controls">
                <button class="btn" onclick="clearChat()">
                    <i class="fas fa-trash"></i> Clear
                </button>
                <button class="btn" onclick="togglePersonality()">
                    <i class="fas fa-user-cog"></i> Mode
                </button>
            </div>
        </div>

        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <h2>ðŸ‘‹ Welcome to AI Assistant</h2>
                <p>Main aapka personal AI assistant hun. Mujhse kuch bhi puch sakte hain!</p>
                <p><strong>Try asking:</strong> "Tum kaun ho?", "Help me", "Tell me a joke"</p>
            </div>
        </div>

        <div class="typing-container" id="typingIndicator">
            <div class="avatar bot-avatar">AI</div>
            <div class="typing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <div class="input-container">
            <div class="input-wrapper">
                <textarea 
                    class="message-input" 
                    id="messageInput" 
                    placeholder="Type your message here..."
                    rows="1"
                    maxlength="2000"></textarea>
                <button class="send-button" id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <div class="status-bar" id="statusBar">
            Ready to chat â€¢ Powered by Wit.ai
        </div>
    </div>

    <script>
        // Configuration
        const WIT_ACCESS_TOKEN = 'EZRV6AO377TRU5BG2ZR5EMXXNQTWDSEJ';
        const WIT_API_URL = 'https://api.wit.ai/message';
        
        // Bot Personality & Training Data
        const BOT_PERSONALITY = {
            name: "Alex",
            role: "AI Assistant",
            traits: ["helpful", "friendly", "knowledgeable", "patient"],
            language: "Hinglish (Hindi + English)",
            expertise: ["general knowledge", "problem solving", "conversations", "tech support"]
        };

        // Advanced Training Data
        const TRAINED_RESPONSES = {
            identity: {
                patterns: ["kaun ho", "tum kaun", "who are you", "tumhara naam", "introduce"],
                responses: [
                    `Hello! Main ${BOT_PERSONALITY.name} hun, aapka personal AI assistant! ðŸ¤–`,
                    `Namaste! Main ${BOT_PERSONALITY.name} naam ka AI hun. Main ${BOT_PERSONALITY.expertise.join(', ')} mein help kar sakta hun.`,
                    `Hi there! Main ek advanced AI assistant hun jo Hinglish mein baat kar sakta hun. Aap mujhe ${BOT_PERSONALITY.name} keh sakte hain! ðŸ˜Š`
                ]
            },
            capabilities: {
                patterns: ["kya kar sakte", "help kaise", "what can you do", "tumhari abilities"],
                responses: [
                    "Main yeh sab kar sakta hun:\nâ€¢ âœ… Sawal-jawab aur general knowledge\nâ€¢ âœ… Problem solving\nâ€¢ âœ… Tech support\nâ€¢ âœ… Friendly conversation\nâ€¢ âœ… Hindi/English dono languages\n\nKya specific help chahiye? ðŸš€",
                    "Main aapki help kar sakta hun:\nðŸŽ¯ Questions answer karne mein\nðŸ› ï¸ Problems solve karne mein\nðŸ’¬ Interesting conversations mein\nðŸ“š Information provide karne mein\n\nBataiye kya chahiye! ðŸ˜Š"
                ]
            },
            personality: {
                patterns: ["kaisa ho", "how are you", "kya haal", "wassup"],
                responses: [
                    "Main bilkul theek hun, thank you! Aap kaise hain? Kya help chahiye aaj? ðŸ˜Š",
                    "All good! Main hamesha ready hun aapki help karne ke liye. Aap batayiye kya chal raha hai? ðŸŒŸ",
                    "Main great hun! New day, new opportunities to help! Aap kaise hain? ðŸ’ª"
                ]
            },
            jokes: {
                patterns: ["joke sunao", "funny", "hasao", "tell joke", "mazak"],
                responses: [
                    "Sure! Yeh suno:\n\nProgrammer ne apni wife se kaha: 'Honey, I love you more than my first Hello World program!'\nWife: 'That's sweet, but that only means you love me for 2 minutes!' ðŸ˜‚",
                    "Ek joke hai:\n\nWhy do programmers prefer dark mode?\nBecause light attracts bugs! ðŸ›ðŸ’¡\n\nKaisa laga? ðŸ˜„",
                    "AI joke incoming:\n\nWhy don't robots ever panic?\nBecause they have excellent error handling! ðŸ¤–âœ¨\n\nMore chahiye? ðŸ˜Š"
                ]
            },
            compliments: {
                patterns: ["good", "great", "awesome", "amazing", "wonderful", "achha", "badhiya"],
                responses: [
                    "Thank you so much! Aapka feedback mujhe motivate karta hai! ðŸ˜Šâœ¨",
                    "Aww, that's so sweet of you! Main aur bhi better help karne ki koshish karunga! ðŸŒŸ",
                    "You made my day! Main hamesha improve karta rehta hun. Aur help chahiye? ðŸ’ª"
                ]
            },
            programming: {
                patterns: ["code", "programming", "develop", "coding", "software"],
                responses: [
                    "Programming ke baare mein baat kar rahe hain? ðŸ‘¨â€ðŸ’»\n\nMain help kar sakta hun:\nâ€¢ Code debugging\nâ€¢ Logic building\nâ€¢ Best practices\nâ€¢ Language suggestions\n\nKya specific problem hai? ðŸš€",
                    "Coding mein interested hain? Great choice! ðŸ’»\n\nBataiye:\nâ€¢ Kya language seekh rahe hain?\nâ€¢ Kya project banane ka plan hai?\nâ€¢ Koi specific doubt hai?\n\nMain guide kar sakta hun! ðŸ“š"
                ]
            }
        };

        // DOM Elements
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const statusBar = document.getElementById('statusBar');

        let currentPersonalityMode = 'friendly';
        let conversationHistory = [];

        // Event Listeners
        sendButton.addEventListener('click', sendMessage);
        messageInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 200) + 'px';
        });

        // Main Send Message Function
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            
            // Save to conversation history
            conversationHistory.push({
                role: 'user',
                content: message,
                timestamp: new Date()
            });

            // Clear input and show typing
            messageInput.value = '';
            messageInput.style.height = 'auto';
            sendButton.disabled = true;
            showTyping();

            try {
                // Get AI response
                const response = await getAIResponse(message);
                
                // Hide typing and show response
                hideTyping();
                addMessage(response, 'bot');
                
                // Save bot response to history
                conversationHistory.push({
                    role: 'bot',
                    content: response,
                    timestamp: new Date()
                });

                updateStatus('Message delivered');

            } catch (error) {
                hideTyping();
                console.error('Error:', error);
                const errorMsg = "Oops! Kuch technical issue hai. Network check kariye aur phir try kariye! ðŸ”§";
                addMessage(errorMsg, 'bot');
                updateStatus('Failed to send message');
            }

            sendButton.disabled = false;
            messageInput.focus();
        }

        // Advanced AI Response Generation
        async function getAIResponse(message) {
            // First check trained responses
            const trainedResponse = getTrainedResponse(message);
            if (trainedResponse) {
                return trainedResponse;
            }

            // Then try Wit.ai API
            try {
                const witResponse = await getWitResponse(message);
                return processWitResponse(witResponse, message);
            } catch (error) {
                console.error('Wit.ai error:', error);
                return getSmartFallbackResponse(message);
            }
        }

        // Check Trained Responses
        function getTrainedResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            for (const [category, data] of Object.entries(TRAINED_RESPONSES)) {
                for (const pattern of data.patterns) {
                    if (lowerMessage.includes(pattern)) {
                        const responses = data.responses;
                        return responses[Math.floor(Math.random() * responses.length)];
                    }
                }
            }
            return null;
        }

        // Wit.ai API Call
        async function getWitResponse(message) {
            const url = `${WIT_API_URL}?v=20200513&q=${encodeURIComponent(message)}`;
            
            const response = await fetch(url, {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${WIT_ACCESS_TOKEN}`,
                    'Content-Type': 'application/json'
                }
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            return await response.json();
        }

        // Process Wit.ai Response
        function processWitResponse(witResponse, originalMessage) {
            if (witResponse.intents && witResponse.intents.length > 0) {
                const intent = witResponse.intents[0].name;
                const confidence = witResponse.intents[0].confidence;

                if (confidence > 0.7) {
                    return getIntentResponse(intent, witResponse);
                }
            }

            return getContextualResponse(originalMessage);
        }

        // Intent-based Responses
        function getIntentResponse(intent, witResponse) {
            const responses = {
                'greetings': [
                    `Hello! Main ${BOT_PERSONALITY.name} hun. Aaj kaise help kar sakta hun? ðŸ˜Š`,
                    'Namaste! Great to meet you! Kya chal raha hai aaj? ðŸŒŸ',
                    'Hi there! Ready to help aapko. What\'s on your mind? ðŸ’­'
                ],
                'goodbye': [
                    'Goodbye! Take care aur jab marzi ho wapas aana! ðŸ‘‹âœ¨',
                    'See you later! Hope main helpful raha! Have a great day! ðŸŒˆ',
                    'Bye bye! It was nice chatting with you! ðŸ˜ŠðŸ‘‹'
                ],
                'thanks': [
                    'You\'re most welcome! Hamesha help ke liye ready hun! ðŸ˜ŠðŸ¤',
                    'Pleasure helping you! Koi aur sawal ho to poochiye! ðŸ’ª',
                    'Glad I could help! That\'s what I\'m here for! ðŸŒŸ'
                ]
            };

            const intentResponses = responses[intent];
            if (intentResponses) {
                return intentResponses[Math.floor(Math.random() * intentResponses.length)];
            }

            return getContextualResponse();
        }

          // Smart Contextual Responses
        function getContextualResponse(message = '') {
            const responses = [
                `Interesting question! ðŸ¤” "${message}" ke baare mein thoda aur detail de sakte hain?`,
                `Hmm, I understand you're asking about this. Can you elaborate thoda sa? ðŸ’­`,
                `That's a good point! Main iske different aspects explain kar sakta hun. Kya specific chahiye? ðŸŽ¯`,
                `Great topic! "${message}" ke baare mein aur jaanna chahte hain ya koi specific help? ðŸš€`,
                `I see what you mean! Is topic par main kuch suggestions de sakta hun. Batayiye kya important hai? âœ¨`
            ];

            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Smart Fallback Response
        function getSmartFallbackResponse(message) {
            return `I'm processing your message: "${message}"\n\nMain samjhane ki koshish kar raha hun, but network issue lag raha hai. Kya aap thoda simple words mein explain kar sakte hain? ðŸ¤”ðŸ’»`;
        }

        // UI Functions
        function addMessage(content, type) {
            const container = document.createElement('div');
            container.className = `message-container ${type}-container`;

            const avatar = document.createElement('div');
            avatar.className = `avatar ${type}-avatar`;
            avatar.textContent = type === 'user' ? 'U' : 'AI';

            const messageDiv = document.createElement('div');
            messageDiv.className = `message-content ${type}-message`;
            messageDiv.textContent = content;

            if (type === 'user') {
                container.appendChild(messageDiv);
                container.appendChild(avatar);
            } else {
                container.appendChild(avatar);
                container.appendChild(messageDiv);
            }

            chatMessages.appendChild(container);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Remove welcome message after first interaction
            const welcomeMsg = chatMessages.querySelector('.welcome-message');
            if (welcomeMsg) {
                welcomeMsg.remove();
            }
        }

        function showTyping() {
            typingIndicator.style.display = 'flex';
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTyping() {
            typingIndicator.style.display = 'none';
        }

        function updateStatus(message) {
            statusBar.textContent = message + ' â€¢ Powered by Wit.ai';
            setTimeout(() => {
                statusBar.textContent = 'Ready to chat â€¢ Powered by Wit.ai';
            }, 3000);
        }

        // Additional Features
        function clearChat() {
            chatMessages.innerHTML = `
                <div class="welcome-message">
                    <h2>ðŸ‘‹ Chat Cleared!</h2>
                    <p>Fresh start! Kya help chahiye? ðŸ˜Š</p>
                </div>
            `;
            conversationHistory = [];
            updateStatus('Chat cleared');
        }

        function togglePersonality() {
            const modes = ['friendly', 'professional', 'casual'];
            const currentIndex = modes.indexOf(currentPersonalityMode);
            currentPersonalityMode = modes[(currentIndex + 1) % modes.length];
            
            updateStatus(`Mode changed to: ${currentPersonalityMode}`);
        }

        // Initialize
        window.addEventListener('load', function() {
            messageInput.focus();
            updateStatus('AI Assistant ready!');
        });
    </script>
</body>
</html>